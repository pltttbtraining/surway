<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TAX Calculator — Fixed Version</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --bg:#f8fafc; --card:#ffffff; --muted:#6b7280;
      --before:#3b82f6; --after:#10b981; --accent:#f59e0b;
    }
    html,body,#root { height: 100%; }
    body { 
      -webkit-font-smoothing:antialiased; 
      -moz-osx-font-smoothing:grayscale; 
      background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color:#0f172a; 
      font-family:'Inter','Segoe UI',system-ui,Arial,sans-serif;
    }
    
    .card { 
      background: white; 
      border-radius: 20px; 
      box-shadow: 0 10px 30px rgba(0,0,0,0.08); 
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .gradient-text { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .tab-active { 
      background: white; 
      color: #667eea; 
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2); 
      border-radius: 12px;
    }
    
    .credit-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      color: white;
      position: relative;
      overflow: hidden;
    }
  </style>
</head>
<body class="antialiased">

  <div id="root"></div>

  <script type="module">
  import React, { useState, useMemo } from "https://esm.sh/react@18.2.0";
  import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";
  import {
    Calculator, BookOpen, X, Plus, ShieldCheck, Users, 
    Gift, Home, TrendingUp, DollarSign, FileText, 
    BarChart3, AlertCircle, ChevronRight
  } from "https://esm.sh/lucide-react@0.309.0";

  /***** ข้อมูลเงินได้ตามมาตรา 40 *****/
  const INCOME_TYPES = [
    { 
      id: 1, 
      name: '40(1) เงินเดือน/ค่าจ้าง', 
      desc: 'เงินเดือน ค่าจ้าง ค่าตอบแทน โบนัส บำเหน็จ บำนาญ', 
      deductionDesc: 'หักค่าใช้จ่าย 50% ไม่เกิน 100,000 บาท', 
      defaultRate: 0.5, 
      hasFixedCap: true,
      maxCap: 100000
    },
    { 
      id: 2, 
      name: '40(2) ค่าจ้างทำของ/รับเหมา', 
      desc: 'ค่าจ้างทำของ ค่าจ้างรับเหมา ค่านายหน้า ค่าคอมมิชชั่น', 
      deductionDesc: 'หักค่าใช้จ่าย 60% หรือตามจริง', 
      defaultRate: 0.6, 
      hasFixedCap: false
    },
    { 
      id: 5, 
      name: '40(5) ค่าเช่าทรัพย์สิน', 
      desc: 'ค่าเช่าอสังหาริมทรัพย์, รถยนต์, เรือ, เครื่องจักร', 
      deductionDesc: 'หักค่าใช้จ่าย 10-30% ตามประเภททรัพย์สิน', 
      defaultRate: 0.3, 
      hasFixedCap: false
    },
    { 
      id: 6,
      name: '40(6) วิชาชีพอิสระ',
      desc: 'ประกอบโรคศิลปะ, กฎหมาย, วิศวกรรม, สถาปัตยกรรม, บัญชี',
      deductionDesc: 'เลือกหักค่าใช้จ่ายเหมา 30% หรือ 60% ตามวิชาชีพ',
      defaultRate: 0.3,
      hasFixedCap: false
    },
    { 
      id: 8, 
      name: '40(8) ธุรกิจ/พาณิชย์', 
      desc: 'ขายของออนไลน์, ค้าขาย, ธุรกิจบริการ, เกษตรกรรม', 
      deductionDesc: 'หักค่าใช้จ่ายตามจริงหรือเหมา 40-85%', 
      defaultRate: 0.6, 
      hasFixedCap: false
    },
  ];

  /***** อัตราภาษีเงินได้บุคคลธรรมดา 2566 *****/
  const TAX_BRACKETS_2023 = [
    { min: 0, max: 150000, rate: 0.00 },
    { min: 150000, max: 300000, rate: 0.05 },
    { min: 300000, max: 500000, rate: 0.10 },
    { min: 500000, max: 750000, rate: 0.15 },
    { min: 750000, max: 1000000, rate: 0.20 },
    { min: 1000000, max: 2000000, rate: 0.25 },
    { min: 2000000, max: 5000000, rate: 0.30 },
    { min: 5000000, max: Infinity, rate: 0.35 },
  ];

  /***** รายการลดหย่อนภาษี *****/
  const DEDUCTION_CATEGORIES = [
    {
      id: 'personal',
      title: 'ส่วนบุคคลและครอบครัว',
      icon: Users,
      items: [
        { 
          key: 'personal', 
          label: 'ส่วนตัว', 
          desc: 'ลดหย่อนส่วนบุคคลทุกคน 60,000 บาท', 
          max: 60000,
          fixed: true
        },
        { 
          key: 'spouse', 
          label: 'คู่สมรส', 
          desc: 'คู่สมรสที่ไม่มีเงินได้ หักได้ 60,000 บาท', 
          max: 60000
        },
        { 
          key: 'child', 
          label: 'บุตร', 
          desc: 'บุตร คนละ 30,000 บาท', 
          max: null,
          perItem: 30000
        },
        { 
          key: 'parent', 
          label: 'พ่อ-แม่', 
          desc: 'ค่าเลี้ยงดูพ่อ-แม่ คนละ 30,000 บาท', 
          max: null,
          perItem: 30000
        }
      ]
    },
    {
      id: 'insurance',
      title: 'ประกันชีวิต/สุขภาพ/บำนาญ',
      icon: ShieldCheck,
      items: [
        { 
          key: 'lifeInsurance', 
          label: 'ประกันชีวิต', 
          desc: 'เบี้ยประกันชีวิต หักได้ไม่เกิน 100,000 บาท', 
          max: 100000
        },
        { 
          key: 'healthInsurance', 
          label: 'ประกันสุขภาพ', 
          desc: 'เบี้ยประกันสุขภาพตัวเอง ไม่เกิน 25,000 บาท', 
          max: 25000
        },
        { 
          key: 'pensionInsurance', 
          label: 'ประกันบำนาญ', 
          desc: 'เบี้ยประกันบำนาญ 15% ของเงินได้ ไม่เกิน 200,000 บาท', 
          max: 200000,
          percentOfIncome: 0.15
        }
      ]
    },
    {
      id: 'investment',
      title: 'การออม/การลงทุน',
      icon: TrendingUp,
      items: [
        { 
          key: 'rmf', 
          label: 'กองทุน RMF', 
          desc: 'เงินลงทุนใน RMF 30% ของเงินได้ ไม่เกิน 500,000 บาท', 
          max: 500000,
          percentOfIncome: 0.30
        },
        { 
          key: 'ssf', 
          label: 'กองทุน SSF', 
          desc: 'เงินลงทุนใน SSF 30% ของเงินได้ ไม่เกิน 200,000 บาท', 
          max: 200000,
          percentOfIncome: 0.30
        }
      ]
    },
    {
      id: 'other',
      title: 'สิทธิประโยชน์อื่นๆ',
      icon: Home,
      items: [
        { 
          key: 'mortgageInterest', 
          label: 'ดอกเบี้ยบ้าน', 
          desc: 'ดอกเบี้ยบ้านหลังแรก ไม่เกิน 100,000 บาท', 
          max: 100000
        },
        { 
          key: 'socialSecurity', 
          label: 'ประกันสังคม', 
          desc: 'เงินสมทบประกันสังคม สูงสุด 9,000 บาท', 
          max: 9000
        }
      ]
    }
  ];

  /***** ฟังก์ชันคำนวณภาษี *****/
  const calculateTax = (taxableIncome) => {
    let tax = 0;
    let remainingIncome = taxableIncome;
    
    for (const bracket of TAX_BRACKETS_2023) {
      if (remainingIncome <= 0) break;
      
      const incomeInBracket = Math.min(remainingIncome, bracket.max) - bracket.min;
      if (incomeInBracket > 0) {
        tax += incomeInBracket * bracket.rate;
        remainingIncome -= incomeInBracket;
      }
    }
    
    return Math.round(tax);
  };

  /***** Component หลัก *****/
  function App() {
    const [activeTab, setActiveTab] = useState('income');
    const [incomeMode, setIncomeMode] = useState('yearly');
    
    // รายได้แต่ละประเภท
    const [incomes, setIncomes] = useState([
      { typeId: 1, amount: 300000, active: true, expenseRate: 0.5 },
      { typeId: 2, amount: 0, active: false, expenseRate: 0.6 },
      { typeId: 5, amount: 0, active: false, expenseRate: 0.3 },
      { typeId: 6, amount: 0, active: false, expenseRate: 0.3 },
      { typeId: 8, amount: 0, active: false, expenseRate: 0.6 },
    ]);
    
    // ข้อมูลลดหย่อน
    const [deductions, setDeductions] = useState({
      personal: 60000,
      spouse: 0,
      child: 0,
      parent: 0,
      lifeInsurance: 0,
      healthInsurance: 0,
      pensionInsurance: 0,
      rmf: 0,
      ssf: 0,
      mortgageInterest: 0,
      socialSecurity: 0
    });
    
    const [errors, setErrors] = useState([]);

    /***** ฟังก์ชันจัดการรายได้ *****/
    const handleIncomeChange = (id, field, val) => {
      const newIncomes = incomes.map(inc =>
        inc.typeId === id ? { ...inc, [field]: Number(val) || 0 } : inc
      );
      setIncomes(newIncomes);
    };

    const toggleIncomeType = (id) => {
      setIncomes(incomes.map(inc =>
        inc.typeId === id ? { ...inc, active: !inc.active, amount: inc.active ? 0 : inc.amount } : inc
      ));
    };

    /***** คำนวณผลลัพธ์ *****/
    const calculateResults = useMemo(() => {
      const newErrors = [];
      
      // คำนวณรายได้รวม (แปลงเป็นรายปีถ้าเป็นรายเดือน)
      let totalIncome = 0;
      incomes.filter(inc => inc.active).forEach(inc => {
        const amount = incomeMode === 'monthly' ? inc.amount * 12 : inc.amount;
        totalIncome += amount || 0;
      });
      
      // คำนวณค่าใช้จ่าย
      let totalExpenses = 0;
      
      // 40(1) และ 40(2) หักรวมกันไม่เกิน 100,000 บาท
      const type1 = incomes.find(inc => inc.typeId === 1);
      const type2 = incomes.find(inc => inc.typeId === 2);
      
      if (type1?.active || type2?.active) {
        const inc1Amount = incomeMode === 'monthly' ? (type1?.amount || 0) * 12 : (type1?.amount || 0);
        const inc2Amount = incomeMode === 'monthly' ? (type2?.amount || 0) * 12 : (type2?.amount || 0);
        const combinedExpense = (inc1Amount + inc2Amount) * 0.5;
        const expense = Math.min(combinedExpense, 100000);
        totalExpenses += expense;
      }
      
      // ประเภทอื่นๆ
      incomes.filter(inc => inc.active && inc.typeId > 2).forEach(inc => {
        const amount = incomeMode === 'monthly' ? inc.amount * 12 : inc.amount;
        totalExpenses += amount * (inc.expenseRate || 0);
      });
      
      // คำนวณเงินได้สุทธิก่อนลดหย่อน
      const incomeBeforeDeductions = Math.max(0, totalIncome - totalExpenses);
      
      /***** คำนวณลดหย่อน *****/
      let totalDeductions = 0;
      
      // ส่วนตัว (หักอัตโนมัติ)
      totalDeductions += 60000;
      
      // คู่สมรส
      if (deductions.spouse > 0) {
        totalDeductions += Math.min(deductions.spouse * 60000, 60000);
      }
      
      // บุตร
      if (deductions.child > 0) {
        totalDeductions += deductions.child * 30000;
      }
      
      // พ่อแม่
      if (deductions.parent > 0) {
        totalDeductions += deductions.parent * 30000;
      }
      
      // ประกันชีวิต + สุขภาพ (รวมกันไม่เกิน 100,000 บาท)
      const lifeInsurance = Math.min(deductions.lifeInsurance, 100000);
      const healthInsurance = Math.min(deductions.healthInsurance, 25000);
      const insuranceTotal = Math.min(lifeInsurance + healthInsurance, 100000);
      totalDeductions += insuranceTotal;
      
      if (lifeInsurance + healthInsurance > 100000) {
        newErrors.push('เบี้ยประกันชีวิต+สุขภาพรวมเกิน 100,000 บาท จะหักได้ไม่เกิน 100,000 บาท');
      }
      
      // ประกันบำนาญ (15% ของรายได้ ไม่เกิน 200,000 บาท)
      const pensionMax = Math.min(totalIncome * 0.15, 200000);
      const pensionInsurance = Math.min(deductions.pensionInsurance, pensionMax);
      totalDeductions += pensionInsurance;
      
      // การลงทุน
      const rmfMax = Math.min(totalIncome * 0.30, 500000);
      const ssfMax = Math.min(totalIncome * 0.30, 200000);
      
      const rmf = Math.min(deductions.rmf, rmfMax);
      const ssf = Math.min(deductions.ssf, ssfMax);
      
      totalDeductions += rmf + ssf;
      
      // สิทธิประโยชน์อื่นๆ
      const mortgageInterest = Math.min(deductions.mortgageInterest, 100000);
      const socialSecurity = Math.min(deductions.socialSecurity, 9000);
      
      totalDeductions += mortgageInterest + socialSecurity;
      
      /***** คำนวณเงินได้สุทธิและภาษี *****/
      const netIncome = Math.max(0, incomeBeforeDeductions - totalDeductions);
      const taxPayable = calculateTax(netIncome);
      
      /***** ตรวจสอบข้อผิดพลาด *****/
      if (totalIncome > 0 && netIncome < 0) {
        newErrors.push('ค่าลดหย่อนเกินจำนวนเงินได้ กรุณาตรวจสอบข้อมูล');
      }
      
      setErrors(newErrors);
      
      return {
        totalIncome,
        totalExpenses,
        incomeBeforeDeductions,
        totalDeductions,
        netIncome,
        taxPayable
      };
    }, [incomes, deductions, incomeMode]);

    /***** หน้าจอแสดงรายได้ *****/
    const renderIncomePage = () => {
      return React.createElement('div', { className: "space-y-6" },
        errors.length > 0 && errors.map((error, index) =>
          React.createElement('div', {
            key: index,
            className: "p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3 mb-4"
          },
            React.createElement(AlertCircle, { className: "w-5 h-5 text-yellow-600 mt-0.5" }),
            React.createElement('p', { className: "text-sm font-medium text-yellow-800" }, error)
          )
        ),
        
        React.createElement('div', { className: "card p-6" },
          React.createElement('div', { className: "flex justify-between items-center mb-6" },
            React.createElement('h2', { className: "text-xl font-bold text-gray-800" }, "รายได้ตามมาตรา 40"),
            React.createElement('div', { className: "flex bg-gray-100 p-1 rounded-lg" },
              React.createElement('button', {
                onClick: () => setIncomeMode('yearly'),
                className: `px-4 py-2 rounded-md ${incomeMode === 'yearly' ? 'bg-white shadow text-blue-600' : 'text-gray-600'}`
              }, "รายปี"),
              React.createElement('button', {
                onClick: () => setIncomeMode('monthly'),
                className: `px-4 py-2 rounded-md ${incomeMode === 'monthly' ? 'bg-white shadow text-blue-600' : 'text-gray-600'}`
              }, "รายเดือน")
            )
          ),
          
          React.createElement('div', { className: "space-y-4" },
            incomes.filter(inc => inc.active).map((inc) => {
              const typeInfo = INCOME_TYPES.find(t => t.id === inc.typeId);
              return React.createElement('div', { key: inc.typeId, className: "border border-gray-200 rounded-xl p-4" },
                React.createElement('div', { className: "flex justify-between items-start mb-3" },
                  React.createElement('div', null,
                    React.createElement('h3', { className: "font-semibold text-gray-800" }, typeInfo.name),
                    React.createElement('p', { className: "text-sm text-gray-500" }, typeInfo.deductionDesc)
                  ),
                  inc.typeId !== 1 && React.createElement('button', {
                    onClick: () => toggleIncomeType(inc.typeId),
                    className: "text-red-400 hover:text-red-600"
                  }, React.createElement(X, { size: 18 }))
                ),
                
                React.createElement('input', {
                  type: "number",
                  min: "0",
                  step: "1000",
                  value: inc.amount,
                  onChange: (e) => handleIncomeChange(inc.typeId, 'amount', e.target.value),
                  className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",
                  placeholder: "0"
                }),
                
                incomeMode === 'monthly' && inc.amount > 0 && React.createElement('div', { className: "mt-2 text-sm text-gray-500" },
                  `เทียบเท่าต่อปี: ${(inc.amount * 12).toLocaleString()} บาท`
                )
              );
            }),
            
            React.createElement('div', { className: "pt-4 border-t border-gray-200" },
              React.createElement('p', { className: "text-sm text-gray-500 mb-3" }, "เพิ่มรายได้ประเภทอื่น:"),
              React.createElement('div', { className: "flex flex-wrap gap-2" },
                incomes.filter(i => !i.active && i.typeId !== 1).map(inc => {
                  const info = INCOME_TYPES.find(t => t.id === inc.typeId);
                  return React.createElement('button', {
                    key: inc.typeId,
                    onClick: () => toggleIncomeType(inc.typeId),
                    className: "flex items-center gap-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-600 hover:border-blue-500 hover:text-blue-600"
                  }, React.createElement(Plus, { size: 14 }), info.name.split(' ')[0]);
                })
              )
            )
          )
        )
      );
    };

    /***** หน้าจอแสดงลดหย่อน *****/
    const renderDeductionPage = () => {
      return React.createElement('div', { className: "space-y-6" },
        React.createElement('div', { className: "card p-6" },
          React.createElement('h2', { className: "text-xl font-bold text-gray-800 mb-6" }, "ค่าลดหย่อนภาษี"),
          
          React.createElement('div', { className: "space-y-8" },
            DEDUCTION_CATEGORIES.map(category =>
              React.createElement('div', { key: category.id },
                React.createElement('div', { className: "flex items-center gap-2 mb-4" },
                  React.createElement(category.icon, { className: "w-5 h-5 text-blue-600" }),
                  React.createElement('h3', { className: "text-lg font-semibold text-gray-800" }, category.title)
                ),
                
                React.createElement('div', { className: "space-y-4" },
                  category.items.map(item => {
                    const currentValue = deductions[item.key] || 0;
                    return React.createElement('div', { key: item.key, className: "flex flex-col md:flex-row md:items-center justify-between gap-2 p-4 bg-gray-50 rounded-lg" },
                      React.createElement('div', { className: "flex-1" },
                        React.createElement('div', { className: "flex items-center gap-2 mb-1" },
                          React.createElement('span', { className: "font-medium text-gray-700" }, item.label),
                          item.max && React.createElement('span', { className: "text-xs text-gray-500" }, `(สูงสุด ${item.max.toLocaleString()} บาท)`)
                        ),
                        React.createElement('p', { className: "text-sm text-gray-500" }, item.desc)
                      ),
                      
                      React.createElement('div', { className: "flex items-center gap-2" },
                        React.createElement('input', {
                          type: "number",
                          min: "0",
                          value: currentValue,
                          onChange: (e) => setDeductions({ ...deductions, [item.key]: Number(e.target.value) || 0 }),
                          className: "w-32 px-3 py-2 border border-gray-300 rounded-lg text-right focus:ring-2 focus:ring-blue-500 outline-none",
                          placeholder: "0"
                        }),
                        React.createElement('span', { className: "text-gray-500" }, "บาท")
                      )
                    );
                  })
                )
              )
            )
          )
        )
      );
    };

    /***** หน้าจอดashboard *****/
    const renderDashboard = () => {
      const results = calculateResults;
      
      // หาว่าเงินได้สุทธิอยู่ช่วงไหน
      const currentBracket = TAX_BRACKETS_2023.find(bracket => 
        results.netIncome > bracket.min && results.netIncome <= bracket.max
      );
      
      return React.createElement('div', { className: "space-y-6" },
        React.createElement('div', { className: "credit-card p-6 relative overflow-hidden" },
          React.createElement('div', { className: "relative z-10" },
            React.createElement('div', { className: "flex justify-between items-start mb-8" },
              React.createElement('div', null,
                React.createElement('p', { className: "text-white/80 text-sm" }, "Tax Calculator 2566"),
                React.createElement('h2', { className: "text-2xl font-bold text-white" }, "คำนวณภาษีเงินได้บุคคลธรรมดา")
              ),
              React.createElement(Calculator, { size: 32, className: "text-white/80" })
            ),
            React.createElement('div', { className: "mb-6" },
              React.createElement('p', { className: "text-white/80 text-sm mb-1" }, "รายได้สุทธิ (หลังหักค่าใช้จ่ายและลดหย่อน)" ),
              React.createElement('h1', { className: "text-4xl font-bold text-white" }, 
                results.netIncome.toLocaleString() + " ฿"
              )
            ),
            React.createElement('div', { className: "grid grid-cols-2 gap-4" },
              React.createElement('div', null,
                React.createElement('p', { className: "text-white/80 text-xs mb-1" }, "รายได้รวม" ),
                React.createElement('p', { className: "text-lg font-semibold text-white" }, results.totalIncome.toLocaleString() + " ฿")
              ),
              React.createElement('div', null,
                React.createElement('p', { className: "text-white/80 text-xs mb-1" }, "ภาษีต้องชำระ" ),
                React.createElement('p', { className: "text-lg font-semibold text-white" }, results.taxPayable.toLocaleString() + " ฿")
              )
            )
          )
        ),
        
        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
          React.createElement('div', { className: "card p-6" },
            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "สรุปการคำนวณ"),
            React.createElement('div', { className: "space-y-3" },
              React.createElement('div', { className: "flex justify-between" },
                React.createElement('span', { className: "text-gray-600" }, "รายได้รวม"),
                React.createElement('span', { className: "font-semibold" }, results.totalIncome.toLocaleString() + " บาท")
              ),
              React.createElement('div', { className: "flex justify-between" },
                React.createElement('span', { className: "text-gray-600" }, "หักค่าใช้จ่ายมาตรา 40"),
                React.createElement('span', { className: "text-red-600 font-semibold" }, "-" + results.totalExpenses.toLocaleString() + " บาท")
              ),
              React.createElement('div', { className: "flex justify-between border-t border-gray-200 pt-2" },
                React.createElement('span', { className: "text-gray-800 font-medium" }, "เงินได้พึงประเมิน"),
                React.createElement('span', { className: "font-bold" }, results.incomeBeforeDeductions.toLocaleString() + " บาท")
              ),
              React.createElement('div', { className: "flex justify-between" },
                React.createElement('span', { className: "text-gray-600" }, "หักค่าลดหย่อนทั้งหมด"),
                React.createElement('span', { className: "text-red-600 font-semibold" }, "-" + results.totalDeductions.toLocaleString() + " บาท")
              ),
              React.createElement('div', { className: "flex justify-between border-t border-gray-200 pt-2" },
                React.createElement('span', { className: "text-gray-800 font-medium" }, "เงินได้สุทธิ"),
                React.createElement('span', { className: "font-bold text-blue-600" }, results.netIncome.toLocaleString() + " บาท")
              ),
              React.createElement('div', { className: "flex justify-between border-t-2 border-gray-300 pt-2 mt-2" },
                React.createElement('span', { className: "text-gray-800 font-bold" }, "ภาษีต้องชำระ"),
                React.createElement('span', { className: "text-xl font-bold text-red-600" }, results.taxPayable.toLocaleString() + " บาท")
              )
            )
          ),
          
          React.createElement('div', { className: "card p-6" },
            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "อัตราภาษีแบบขั้นบันได 2566"),
            React.createElement('div', { className: "space-y-2" },
              TAX_BRACKETS_2023.map((bracket, index) =>
                React.createElement('div', { 
                  key: index, 
                  className: `flex justify-between p-2 rounded ${currentBracket === bracket ? 'bg-blue-50' : ''}` 
                },
                  React.createElement('span', { className: "text-sm" },
                    bracket.max === Infinity ? 
                      `เกิน ${bracket.min.toLocaleString()} บาท` :
                      `${bracket.min.toLocaleString()} - ${bracket.max.toLocaleString()} บาท`
                  ),
                  React.createElement('span', { className: "font-medium" }, `อัตรา ${(bracket.rate * 100)}%`)
                )
              )
            ),
            React.createElement('div', { className: "mt-4 p-3 bg-gray-50 rounded-lg" },
              currentBracket && React.createElement('p', { className: "text-sm text-gray-600" },
                "เงินได้สุทธิของคุณอยู่ในอัตราภาษี: ",
                React.createElement('span', { className: "font-semibold" }, (currentBracket.rate * 100) + "%")
              )
            )
          )
        )
      );
    };

    /***** หน้าจอข้อมูลกฎหมาย *****/
    const renderInfoPage = () => {
      return React.createElement('div', { className: "card p-6" },
        React.createElement('h2', { className: "text-xl font-bold text-gray-800 mb-4" }, "ข้อมูลกฎหมายภาษี 2566"),
        React.createElement('div', { className: "space-y-4" },
          React.createElement('div', { className: "p-4 bg-blue-50 rounded-lg" },
            React.createElement('h3', { className: "font-semibold text-blue-800 mb-2" }, "หลักเกณฑ์สำคัญ"),
            React.createElement('ul', { className: "list-disc list-inside text-sm text-blue-700 space-y-1" },
              React.createElement('li', null, "เงินได้ประเภท 40(1) และ 40(2) หักค่าใช้จ่ายรวมกันไม่เกิน 100,000 บาท"),
              React.createElement('li', null, "ส่วนตัวหักอัตโนมัติ 60,000 บาททุกคน"),
              React.createElement('li', null, "ประกันชีวิต+สุขภาพรวมกันไม่เกิน 100,000 บาท"),
              React.createElement('li', null, "RMF/SSF/PVD รวมกันไม่เกิน 500,000 บาท")
            )
          ),
          React.createElement('div', { className: "p-4 bg-green-50 rounded-lg" },
            React.createElement('h3', { className: "font-semibold text-green-800 mb-2" }, "แหล่งข้อมูลอ้างอิง"),
            React.createElement('ul', { className: "text-sm text-green-700 space-y-1" },
              React.createElement('li', null, "ประมวลรัษฎากร มาตรา 40, 47"),
              React.createElement('li', null, "กรมสรรพากร ประกาศปี 2566"),
              React.createElement('li', null, "ข้อมูล ณ วันที่ 1 มกราคม 2567")
            )
          )
        )
      );
    };

    return React.createElement('div', { className: "min-h-screen bg-gray-50" },
      React.createElement('div', { className: "max-w-6xl mx-auto px-4 py-6" },
        React.createElement('header', { className: "mb-8" },
          React.createElement('div', { className: "flex justify-between items-center mb-6" },
            React.createElement('div', null,
              React.createElement('h1', { className: "text-2xl font-bold gradient-text" }, "TAX Calculator 2566"),
              React.createElement('p', { className: "text-gray-600" }, "คำนวณภาษีเงินได้บุคคลธรรมดาตามกฎหมายปัจจุบัน")
            ),
            React.createElement('div', { className: "text-right" },
              React.createElement('p', { className: "text-sm text-gray-500" }, "ประจำปี"),
              React.createElement('p', { className: "font-bold text-blue-600" }, "พ.ศ. 2566-2567")
            )
          )
        ),
        
        React.createElement('div', { className: "mb-6" },
          React.createElement('div', { className: "flex overflow-x-auto bg-gray-100 p-1 rounded-xl" },
            [
              { id: 'income', label: 'รายได้', icon: DollarSign },
              { id: 'deduction', label: 'ลดหย่อน', icon: FileText },
              { id: 'dashboard', label: 'ผลการคำนวณ', icon: Calculator },
              { id: 'info', label: 'ข้อมูลกฎหมาย', icon: BookOpen },
            ].map(tab =>
              React.createElement('button', {
                key: tab.id,
                onClick: () => setActiveTab(tab.id),
                className: `flex items-center gap-2 px-4 py-3 rounded-lg whitespace-nowrap ${activeTab === tab.id ? 'tab-active' : 'text-gray-600 hover:bg-gray-200'}`
              },
                React.createElement(tab.icon, { size: 18 }),
                React.createElement('span', { className: "font-medium" }, tab.label)
              )
            )
          )
        ),
        
        React.createElement('main', null,
          activeTab === 'income' && renderIncomePage(),
          activeTab === 'deduction' && renderDeductionPage(),
          activeTab === 'dashboard' && renderDashboard(),
          activeTab === 'info' && renderInfoPage()
        ),
        
        React.createElement('footer', { className: "mt-8 pt-6 border-t border-gray-200 text-center text-gray-500 text-sm" },
          React.createElement('p', null, "คำนวณภาษีเงินได้บุคคลธรรมดาตามกฎหมายไทย"),
          React.createElement('p', { className: "mt-1" }, "© 2567 ข้อมูลอ้างอิงจากกรมสรรพากร")
        )
      )
    );
  }

  // Mount React app
  const rootElement = document.getElementById('root');
  const root = createRoot(rootElement);
  root.render(React.createElement(App));

  </script>
</body>
</html>